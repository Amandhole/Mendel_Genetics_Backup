{% extends 'base.html' %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="en">

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
<!-- Mirrored from pixner.net/sbidu/main/dashboard.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 09 Aug 2022 06:34:06 GMT -->

<style type="text/css">
    
    .purchasing-table tbody tr {
    font-size: 14px;
    color: #171d1c;
    font-weight: 500;
}

</style>
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<body>
    <input type="hidden"  value="{{user_obj.id}}" name="" id="user_id">

    <div class="cart-sidebar-area">
        <div class="top-content">
            
            <span class="side-sidebar-close-btn"><i class="fas fa-times"></i></span>
        </div>
        <div class="bottom-content">
            <div class="cart-products">
                
                
                <ul id="menu" style="color: white;">
                    
                        <li><a class='prett' href='#' title='Menu'>About Us</a>
      <ul class='menus'>
        
        <li><a href='#' title='Dropdown 2'>About Mendel Genetics</a></li>
        <li><a href='#' title='Dropdown 3'>Mission, Vision and Values</a></li>
        <li><a href='#' title='Dropdown 3'>Management Team</a></li>
        <li><a href='#' title='Dropdown 3'>Institutional Relationships</a></li>
        <li><a href='#' title='Dropdown 3'>Quality</a></li>
      </ul>
    </li>

                        <li><a class='prett' href='#' title='Menu'>Diagnostic fields</a>
      <ul class='menus'>
        
        <li><a href='#' title='Dropdown 2'>Genome Sequencing</a></li>
        <li><a href='#' title='Dropdown 3'>Liquid Biopsy</a></li>
        <li><a href='#' title='Dropdown 3'>Molecular Oncology</a></li>
        <li><a href='#' title='Dropdown 3'>NGS Panels</a></li>
        <li><a href='#' title='Dropdown 3'>Exome</a></li>
      </ul>
    </li>

                
                    <li><a href="" style="color: #fff;">Precision Medicine</a></li>
                    <li><a href="" style="color: #fff;">Genetic Counselling</a></li>
                    <li><a href="" style="color: #fff;">Ordering a test</a></li>
                    <li><a href="" style="color: #fff;">News and Events</a></li>
                    <li><a href="" style="color: #fff;">Contact</a></li>
                </ul>
                
                
                
                
                <!-- <div class="btn-wrapper text-center">
                    <a href="#0" class="custom-button"><span>Checkout</span></a>
                </div> -->
            </div>
        </div>
    </div>
    <!--============= Cart Section Ends Here =============-->


    <!--============= Hero Section Starts Here =============-->
    <div class="hero-section style-2 pb-lg-400">
        
        <div class="bg_img hero-bg bottom_center" data-background="{% static 'assets/images/banner/hero-bg.png' %}"></div>
    </div>



    <!--============= Dashboard Section Starts Here =============-->
    <section class="dashboard-section padding-bottom mt--240 mt-lg--325 pos-rel">
        <div class="container">
            <div class="row justify-content-center">

                {%  include  'sidebar.html' %}


                <div id="rts_div" class="col-lg-8">

                </div>

               

                <div class="col-lg-8" id="postedlist">
                    
                    <div class="dashboard-widget">
                        <h5 class="title mb-15" style="margin-bottom: 20px;">Posted Test</h5>
                        <div class="dashboard-purchasing-tabs">
                            <ul class="nav-tabs nav">
                                
                                <li>
                                    <a href="#" class="active" data-toggle="tab" id="pending_div_button" >Pending</a>
                                </li>
                                <li>
                                    <a href="#"  data-toggle="tab" id="active_div_button" >Active</a>
                                </li>
                                 <li>
                                    <a href="" id="confirm_div_button" data-toggle="tab">Confirmed</a>
                                </li>
                                <li>
                                    <a href="#" data-toggle="tab" id="completed_div_button">Completed</a>
                                </li>
                                <li>
                                    <a href="#" data-toggle="tab" id="cancelled_div_button" >Cancelled</a>
                                </li>
                                
                               
                            </ul>
                        
                        


                    <div id="div_show_test" >
                        <div class="tab-content" style="overflow-y: scroll; max-height: 600px;">

                            {% if pending_test %}
                                {% for test in pending_test %}
                                    <div class="tab-pane show active fade" id="current">
                                        <div class="exchagene-box" style="height:auto; margin-bottom: 20px;
                                            background: var(--unnamed-color-ffffff) 0% 0% no-repeat padding-box;
                                            background: #ffff 0% 0% no-repeat padding-box;
                                            border-radius: 8px;
                                            box-shadow: inset 0px 3px 6px #4a66ad29, 0px 3px 6px #4a66ad29;
                                            opacity: 1;
                                            padding: 30px; border: 1px solid #80808052;
                                            margin-top: 0px; padding-top: 15px;">
                                    
                                            <div class="row">
                                                


                                                <div class="row col-md-12">
                                                    <div class="col-md-3" style="padding-top: 10px;margin-left: -13px;">
                                                        <span style="font-weight: 600;">Auction id </span>
                                                    </div>
                                                    <div class="col-md-9" style="margin-top: 18px; margin-bottom: 5px;margin-left: -5px;">   
                                                            <h6 style="font-size: 17px; font-weight:400;">
                                                                {%if test.auction_test_id %}{{ test.auction_test_id }}{% else %}----{% endif %} 
                                                            </h6> 
                                                    </div>
                                                </div> 

                                                <div class="row col-md-12">
                                                    <div class="col-md-3" style="padding-top: 10px;margin-left: -13px;">
                                                        <span style="font-weight: 600;">Pathalogy </span>
                                                    </div>

                                                    <div class="col-md-9" style="margin-top: 18px; margin-bottom: 5px;margin-left: -5px;">
                                                        {%if test.fk_sample_master.pathalogy|length > 100 %}   
                                                            <h6 style="font-size: 17px; font-weight:400;">{{test.fk_sample_master.pathalogy|slice:":100"}}...</h6> 
                                                        {% else %}    
                                                            <h6 style="font-size: 17px; font-weight:400;">{{test.fk_sample_master.pathalogy}}</h6>
                                                        {% endif %}    
                                                    </div>
                                                </div> 


                                                <div class="row col-md-12">
                                                    <div class="col-md-3" style="padding-top: 10px;margin-left: -14px; ">
                                                        <span style="font-weight: 600;">Gen </span>
                                                    </div>
                                                    <div class="col-md-9" style="margin-top: 18px; margin-bottom: 5px;">
                                                    
                                                        {%if test.fk_sample_master.gens|length > 100 %}
                                                            
                                                            <h6 style="font-size: 17px; font-weight:400;">{{test.fk_sample_master.gens|slice:":100"}}...</h6> 
                                                        {% else %}    
                                                        
                                                                <h6 style="font-size: 17px; font-weight:400;">{{test.fk_sample_master.gens}}</h6>
                                                        {% endif %}    
                                                    </div>
                                                </div>   
                                                
                                                


                                                <div class="row col-md-12">
                                                    <div class="col-md-3" style="padding-top: 10px; margin-left: -14px;">
                                                        <span style="font-weight: 600;">Contact Person </span>
                                                    </div>
                                                    <div class="col-md-9" style="margin-top: 18px; margin-bottom: 5px;">

                                                    {%if test.Contact_person_name|length > 100 %}
                                                            
                                                            <h6 style="font-size: 17px; font-weight:400;">{{test.Contact_person_name|slice:":100"}}...</h6> 
                                                        {% else %}    
                                                        
                                                                <h6 style="font-size: 17px; font-weight:400;">{{test.Contact_person_name}}</h6>
                                                        {% endif %}    
                                                    </div>
                                                </div> 

                                                
                                                <div class="row col-md-12">
                                                    <div class="col-md-3" style="padding-top: 10px;margin-left: -13px;">
                                                        <span style="font-weight: 600;">Date  </span>
                                                    </div>

                                                    <div class="col-md-5" style="margin-top: 15px;">
                                                        <h6 style="font-size: 15px; font-weight: 400; ">{{ test.date|date:'d-m-Y'}}</h6>
                                                    </div> 

                                            
                                                    <div class="col-md-4">
                                                        <button type="button" data-toggle="modal" data-target="#edit_posted_test" onclick="edit_posted_test('{{test.id}}','{{test.patient_first_name}}','{{test.patient_last_name}}','{{test.patient_age}}','{{test.patient_race}}','{{test.patient_gender}}','{{test.patient_weight}}','{{test.patient_height}}','{{test.doctor_name}}','{{test.date|date:'d-m-Y'}}','{{test.Centre}}','{{test.Email}}','{{test.other_way|default_if_none:''}}','{{test.test_requested}}','{{test.background_data}}','{{test.patient_test}}','{{test.weight_unit}}','{{test.height_unit}}','{{test.Contact_person_name|default_if_none:''}}')"  style="background-color: #7019f4;color: white;height: 27px;width: 58px; border-radius: 5px; border: none; margin-left: 10px; margin-right: 10px;">
                                                            <i class="flaticon-edit" ></i> 
                                                        </button>   

                                                    
                                                                
                                                        <button type="button" onclick="delete_posted_test(id)" id="{{test.id}}" style="background-color: #7019f4;color: white;height: 27px;width: 58px; border-radius: 5px;border: none;">
                                                            <i class="fa fa-trash"></i>
                                                        </button>
                                                    </div> 
                                                </div>
                                            </div>
                                                
                                        </div>
                                    </div>
                                {% endfor %}
                            {% else %}
                            
                            <h6 style="text-align: center;"> No test available</h6>

                            {% endif %}
                        </div>    
                    </div>    

                </div>    
            </div>
        </div>    
    </section>
      


<div class="modal fade" id="aman_model" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="max-width: 750px !important;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel" style="margin-left: 300px;">Preview</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-left: 190px;">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
                
                                   
                <div class="login-form">

                    <div id="accordion_data">

                        

                    </div>
                </div>
                
            </div>
        </div>
    </div>
</div>



    <!--============= Dashboard Section Ends Here =============-->


    <!--============= Footer Section Starts Here =============-->

<!-- Edit test modal  start start here -->

<div class="modal fade" id="edit_posted_test" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="max-width: 930px !important;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Edit</h5>
        <button type="button" class="close" data-dismiss="modal" id="closebtn" aria-label="Close" style="margin-left: 750px;">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <input type="hidden" id="test_id">

        <div class="modal-body">

                                   
            <div class="login-form">
                
                

                    <div style="margin-top: 25px;">
                        <h6>Prescriber Data</h6>
                        <hr>
                    </div>


                    <div class="row">

                        <div class="form-group  col-md-6">
                            <input type="text" id="drname" placeholder="Doctor Name" style="padding-left: 20px;">
                            <span id="drname_modal_error" style="color: red;margin-left: 15PX;"></span>
                        </div>

                        <div class="form-group  col-md-6">
                            <label for="datepicker"><i class="fa fa-calendar" style="margin-left: 370px;"></i></label>
                            <input type="text" id="datepicker" readonly placeholder="DD/MM/YY" style="padding-left: 20px;" class="">

                            <span id="datepicker_modal_error" style="color: red;margin-left: 15PX;"></span>
                        </div> 

                        
                          
                        <div class="form-group  col-md-12">
                            <input type="text" id="centre" placeholder="Center" style="padding-left:20px;">
                            <span id="centre_modal_error" style="color: red;margin-left: 15PX;"></span>
                        </div>
                    </div>
                        
                    <div style="margin-top: 25px;">
                        <h6>Delivery Of Result</h6>
                        <hr>
                    </div>

                    <div class="row">
                          
                        <div class="form-group  col-md-6">
                            <input type="text" id="email" placeholder="Email" style="padding-left: 20px;">
                            <span id="email_modal_error" style="color: red;margin-left: 15PX;"></span>
                        </div>

                        <div class="form-group  col-md-6">                              
                            <input type="text" id="otherway" placeholder="Other way" style="padding-left: 20px;">
                            <span id="otherway_modal_error" style="color: red;margin-left: 15PX;"></span>
                        </div>
                          
                    </div>
                    <div class="row">
                          
                        <div class="form-group  col-md-6">
                            <input type="text" id="contact_person_name" placeholder="Contact Person (Full Name)" style="padding-left: 20px;">
                            <span id="contact_person_name_error" style="color: red;margin-left: 15PX;"></span>
                        </div>
                          
                    </div>

                    <div style="margin-top: 25px;">
                        <h6>Test Requested</h6>
                        <hr>
                    </div>


                    
                        <div class="row" style="justify-content: center;margin-left: -54px;">

                          <div class="col-md-2">
                            <span class="float-right" style="margin-top:10px; margin-left:30px ;">
                              Search By :
                            </span>
                          </div> 

                          <div class="col-md-2">
                            <div class="form-check form-check-inline ">
                                <input class="form-check-input" type="radio" onclick="show_pathalogy_field()" value="Pathalogy" name="testradio" id="Pathalogyid" checked style="width:21px;">
                                <label class="form-check-label" for="flexRadioDefault1">Pathalogy</label>
                            </div>
                          </div>

                          <div class="col-md-2">
                            <div class="form-check form-check-inline ">
                              <input class="form-check-input" type="radio" onclick="show_gens_field()"  value="Gens" name="testradio" id="Gensid" style="width:21px;">
                              <label class="form-check-label" for="flexRadioDefault1"> Gens</label>
                            </div>
                          </div> 
                  
                          <div>
                            
                          </div>

                          <div class="col-md-6" id="select_pathlogy_id">
                            <select  id="select_sample_path" onchange="show_data_selected_data(value)" style="border-radius: 5px;">
                              <option value="">Select Pathalogy</option>
                              {% for i in sampletest %}
                                <option value={{i.id}}>{{i.pathalogy}}</option>
                              {% endfor %}
                            </select>
                          </div>

                          <div class="col-md-6" id="select_gens_id">
                            <select  id="select_sample_gens" onchange="show_data_selected_data(value)" style="border-radius: 5px;">
                              <option value="">Select Gens</option>
                              {% for i in sampletest %}
                                  <option value="{{i.id}}">{{i.gens}}</option>
                              {% endfor %}
                            </select>
                          </div>

                        </div> 

                    {% comment %} <div class="form-group ">
                        <textarea name="" id="testrequested" cols="1" placeholder="" rows="5" style="height: auto;"></textarea>
                        <span id="testrequested_modal_error" style="color: red;margin-left: 15PX;"></span>
                    </div> {% endcomment %}


                    
                        <div class="row" id="show_hide_data">
                          <div class="col-md-2">
                            <span>Sample Type :</span>
                          </div>
                          <div class="col-md-10">
                            <span id="sample_type_id"></span>
                          </div>
                          
                          <div class="col-md-2">
                            <span>Transport:</span>
                          </div>

                          <div class="col-md-10">
                            <span id="transport_id"></span>
                          </div>
                          
                          <div class="col-md-2">
                            <span id="gens">Gens:</span>
                          </div>
                          <div class="col-md-10">
                            <span id="gens_id"></span>
                          </div>
                          
                          <div class="col-md-2">
                            <span id="path">Pathalogy :</span>
                          </div>
                          <div class="col-md-10">
                            <span id="pathalogy_id"></span>
                          </div>
                          
                        </div>


                    <div style="margin-top: 25px;">
                        <h6>Background and data of interest</h6>
                        <hr>
                    </div>

                    <div class="form-group ">                             
                        <textarea name="" id="backgrounddata" cols="1" placeholder="" rows="5" style="height: auto;"></textarea>
                        <span id="backgrounddata_modal_error" style="color: red;margin-left: 15PX;"></span>
                    </div>
                    
                    
                   
                <div style="margin-top: 60px;">
                   <h6>Patient detail(Optional)</h6>
                   <hr>
                </div>

                <div class="row">
                           
                          
                    <div class="form-group  col-md-5">
                        <input type="text" id="firstname" placeholder="First Name" style="padding-left: 20px;">
                        <span id="firstname_modal_error" style="color: red;margin-left: 15PX;"></span>  
                    </div>
                            

                    <div class="form-group  col-md-5">
                        <input type="text" id="lastname" placeholder="Last Name" style="padding-left: 20px;">
                        <span id="lastname_modal_error" style="color: red;margin-left: 15PX;"></span>
                    </div>

                    <div class="form-group  col-md-2">
                        <input type="text" id="patientage" placeholder="Age" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');" style="padding-left: 11px;" maxlength="3">
                        <span id="patientage_modal_error" style="color: red;margin-left: 15PX;"></span>
                    </div>

                          
                </div>

                <div class="row" col="">

                    <div class="form-group  col-md-3">
                        <input type="text" id="patientrace" placeholder="Race" style="padding-left: 20px;">
                        <span id="patientrace_modal_error" style="color: red;margin-left: 15PX;"></span>
                    </div>
                          

                    <div class="form-group  col-md-3">

                        <select name="" id="selectgender" style=" border: 1px solid rgba(97, 90, 191, 0.2); border-radius:5px ;">
                            <option value="">Select Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>     
                        <span id="selectgender_modal_error" style="color: red;margin-left: 15PX;"></span>
                              
                    </div>

                    <div class="form-group  col-md-3">
                              
                              <input type="text" id="patientweight" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" placeholder="Weight" style="padding-left: 20px;border-right: none ;" maxlength="4">
                              <label style="margin-left:112px;">
                                <select name="" id="weight_unit" style="border-bottom-right-radius:5px ;border-top-right-radius:5px;width: 70px;">
                                 
                                  <option value="KG">Kg</option>
                                  <option value="LB">Lb</option>
                                </select></label>
                              <span id="patientweight_modal_error" style="color: red;margin-left: 15PX;"></span>
                    </div>

                    <div class="form-group  col-md-3">
                        
                        <input type="text" id="patientheight" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" placeholder="Height" style="padding-left: 20px;border-right: none;" maxlength="4">
                        <label style="margin-left:114px;">
                                <select name="" id="height_unit" style="border-bottom-right-radius:5px ;border-top-right-radius:5px;width: 70px;">
                                  <option value="Ft">Ft</option>
                                  <option value="CM">cm</option>
                                </select></label>
                        <span id="patientheight_modal_error" style="color: red;margin-left: 15PX;"></span>
                        </div>

                    </div>
                    <hr>
            
                <div style="width: 100%;">
                    <center>
                        <div class="row" style="width: fit-content;">
                            <div class="col-md-6" style="">
                                <div class="form-group mb-0"  >
                                    <button type="button" id="" style="width: 100px;height: 45px; padding-right: 10px;padding-left: 10px;" onclick="edit_posted_test_save_button()" class="custom-button  save_button_text notranslate">Save</button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-0">
                                    {% comment %} <button type="button"  id="closebtn" style="width: 100px;height: 45px; padding-right: 10px;padding-left: 10px;"  data-dismiss="modal" class="custom-button">Close</button> {% endcomment %}
                                </div> 
                            </div>
                        </div>   
                    </center>     
                </div>
      </div>

    </div>
  </div>
</div>

<!-- Edit test modal end here -->



<!-- accordion modal test modal  start start here -->



    <script src="{% static 'assets/js/jquery-3.3.1.min.js' %}"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js" integrity="sha512-2ImtlRlf2VVmiGZsjm9bEyhjGW4dU7B6TNwh/hx/iSByxNENtj3WVE6o/9Lj4TJeVXPi4bnOIMXFIJJAeufa0A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  

<script>

    $("#closebtn").click(function(){

        $("#id_text_box_show").hide()
    })
        
    $("#rts_div").hide()

    $(document).ready(function(){
        
        $("#profile_setting").removeClass('active')
        $("#posted_test").addClass('active')

        $("#show_hide_data").hide()
        $("#select_gens_id").hide()



    })
</script>

<script>

     function showTextBox(text_id, check_id)
      {
          if($('#'+check_id).prop('checked') == true)
          {
            $('#'+text_id).show();
            $('#'+text_id).css('margin-top', '-30px');
          }
          else
          {
            $('#'+text_id).hide();
          }
      }
      
      $("#checkbox3").click(function(){
        $("#id_text_box_show").hide()
      })
      $("#checkbox2").click(function(){
        $("#id_text_box_show").hide()
      })
      $("#checkbox1").click(function(){
        $("#id_text_box_show").hide()
      })




      function delete_cancelled_test(id){        

        swal({
            icon:"warning",
            text:"Are you sure to delete test?",
            buttons: ["No", "Yes"],
            dangerMode: true,
            closeOnClickOutside:false
            
                    
        }).then((willDelete) => {
            if(willDelete) {
            $.ajax({
            method : "POST",
            url : "{% url 'posted_cancelled_test_delete_by_user' %}",
            contentType : "application/json",
            data : JSON.stringify({
                "test_id":id
            }),
            success : function(response){
                if(response['status'] == '0'){
                    console.log(response)
                    swal({
                        icon : "error",
                        text: "Something Went Wrong",
                        closeOnClickOutside:false,
                    //    timer: 1000
                    })
                }
                else{
                    console.log(response)
                    swal({
                        icon:"success",
                        text:"Test Deleted Successfully ",
                        closeOnClickOutside:false
                    }).then(function(){
                        $("#div_show_test").html(response)
                    })
                }
            }
        })
    }

    })        
    }


    function delete_posted_test(id){
        

        swal({
            icon:"warning",
            text:"Are you sure to delete test?",
            buttons: ["No", "Yes"],
            dangerMode: true,
            closeOnClickOutside:false
            
                    
        }).then((willDelete) => {
            if(willDelete) {
            $.ajax({
            method : "POST",
            url : "{% url 'posted_test_delete_by_user' %}",
            contentType : "application/json",
            data : JSON.stringify({
                "test_id":id
            }),
            success : function(response){
                if(response['status'] == '0'){
                    console.log(response)
                    swal({
                        icon : "error",
                        text: "Something Went Wrong",
                        closeOnClickOutside:false,
                    //    timer: 1000
                    })
                }
                else{
                    console.log(response)
                    swal({
                        icon:"success",
                        text:"Test Deleted Successfully ",
                        closeOnClickOutside:false
                    }).then(function(){
                        $("#div_show_test").html(response)
                    })
                }
            }
        })
    }

        })
        
        
    }


    $('#datepicker').datepicker({ dateFormat: 'dd-mm-yy',changeMonth: true,changeYear: true }).val();

    function edit_posted_test(id,patient_first_name,patient_last_name,patient_age,patient_race,patient_gender,patient_weight,patient_height,doctor_name,date,centre,Email,other_way,test_requested,background_data,patient_test,weight_unit,height_unit,Contact_person_name){
        debugger     
        $("#test_id").val(id)
        $("#firstname").val(patient_first_name)
        $("#lastname").val(patient_last_name)
        $("#patientage").val(patient_age)
        $("#patientrace").val(patient_race)
        $("#selectgender").val(patient_gender)
        $("#patientweight").val(patient_weight)
        $("#patientheight").val(patient_height)
        $("#drname").val(doctor_name)
        $("#datepicker").val(date)
        $("#centre").val(centre)
        $("#email").val(Email)
        $("#otherway").val(other_way)
        $("#testrequested").val(test_requested)
        $("#backgrounddata").val(background_data)
        $("#weight_unit").val(weight_unit)
        $("#height_unit").val(height_unit)
        $("#contact_person_name").val(Contact_person_name)

        
        console.log(patientheight)
        
        var test = patient_test
        console.log(test)

        
        if ( test == "EDTA Blood"){
            $("#checkbox1").prop('checked','checked')

        }
        else if(test == "Swab"){
            $("#checkbox2").prop('checked','checked')

        }

        else if(test == "Paraffin"){
            $("#checkbox3").prop('checked','checked')
        }
        else{
            $("#checkbox4").prop('checked','checked')

            $("#id_text_box_show").show()
            $("#id_text_box_show").val(test)
        }

    }

    $("#checkbox3").click(function(){
        $("#id_text_box_show").hide()
        $("#id_text_box_show_error").hide()

      })
      $("#checkbox2").click(function(){
        $("#id_text_box_show").hide()
        $("#id_text_box_show_error").hide()
      })
      $("#checkbox1").click(function(){
        $("#id_text_box_show").hide()
        $("#id_text_box_show_error").hide()
      })





      $("#firstname").keyup(function () {
          $("#firstname").css("border", "1px solid #eee");
          $("#firstname_modal_error").html("");
        });

        
        $("#lastname").keyup(function () {
          $("#lastname").css("border", "1px solid #eee");
          $("#lastname_modal_error").html("");
        });

         $("#patientage").keyup(function () {
          $("#patientage").css("border", "1px solid #eee");
          $("#patientage_modal_error").html("");
        });

         $("#patientrace").keyup(function () {
          $("#patientrace").css("border", "1px solid #eee");
          $("#patientrace_modal_error").html("");
        });

         $("#selectgender").click(function () {
          $("#selectgender").css("border", "1px solid #eee");
          $("#selectgender_modal_error").html("");
        });

         $("#patientweight").keyup(function () {
          $("#patientweight").css("border", "1px solid #eee");
          $("#patientweight_modal_error").html("");
        });

         $("#patientheight").keyup(function () {
          $("#patientheight").css("border", "1px solid #eee");
          $("#patientheight_modal_error").html("");
        });

         $("#drname").keyup(function () {
          $("#drname").css("border", "1px solid #eee");
          $("#drname_modal_error").html("");
        });

        $("#datepicker").click(function () {
          $("#datepicker").css("border", "1px solid #eee");
          $("#datepicker_modal_error").html("");
        })

         $("#centre").keyup(function () {
          $("#centre").css("border", "1px solid #eee");
          $("#centre_modal_error").html("");
        });

         $("#email").keyup(function () {
          $("#email").css("border", "1px solid #eee");
          $("#email_modal_error").html("");
        });


        $("#select_sample_path").click(function () {
          $("#select_sample_path").css("border", "1px solid #eee");
          $("#testrequested_error").html("");
        });

         $("#otherway").keyup(function () {
          $("#otherway").css("border", "1px solid #eee");
          $("#otherway_modal_error").html("");
        });

         $("#testrequested").keyup(function () {
          $("#testrequested").css("border", "1px solid #eee");
          $("#testrequested_modal_error").html("");
        });

         $("#backgrounddata").keyup(function () {
          $("#backgrounddata").css("border", "1px solid #eee");
          $("#backgrounddata_modal_error").html("");
        });
    
          $("#id_text_box_show").keyup(function () {
          $("#id_text_box_show").css("border", "1px solid #eee");
          $("#id_text_box_show_error").html("");
        });

          $("#contact_person_name").keyup(function () {
          $("#contact_person_name").css("border", "1px solid #eee");
          $("#contact_person_name_error").html("");
        });

  
    function edit_posted_test_save_button(){
      
        debugger   
        
        var test_id = $("#test_id").val()
        var firstname =  $("#firstname").val()
        var lastname =  $("#lastname").val()  
        var patientage =  $("#patientage").val()
        var patientrace =  $("#patientrace").val()
        var selectgender =  $("#selectgender").val()
        var patientweight =  $("#patientweight").val()
        var patientheight =  $("#patientheight").val()
        var drname =  $("#drname").val()      
        var datepicker =  $("#datepicker").val()
        var centre =  $("#centre").val()  
        var email =  $("#email").val()
        var otherway =  $("#otherway").val()
      


        var test_requested_type = $("input[name='testradio']:checked").val(); //type can be pathalogy or Gens
    
    
        var test_req_id1 = $("#select_sample_path").val()
        var test_req_id2 = $("#select_sample_gens").val()


        var test_req_disc1 = $("#select_sample_path option:selected").text()
        var test_req_disc2 = $("#select_sample_gens option:selected").text()
      //var patient_test = $("input[name='radiobutton']:checked").val();
      //var other_test = $("#id_text_box_show").val()

      var weight_unit = $("#weight_unit").val()
      var height_unit = $("#height_unit").val()
      var contact_pereson =$("#contact_person_name").val()
      
           
      var emailfilter = /^\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i;

        if (test_req_id1 != ''){
            var test_req_id = test_req_id1
            var test_req_disc = test_req_disc1
        }

        else if (drname == ''){
        $("#drname").css('border','1px solid #f37777');
        $("#drname").focus();
        $("#drname_modal_error").html('Enter Doctor Name')   
      }

         else if (datepicker == ''){
        $("#datepicker").css('border','1px solid #f37777');
        $("#datepicker").focus();
        $("#datepicker_modal_error").html('Select Date')   
      }

        else if (centre == ''){
        $("#centre").css('border','1px solid #f37777');
        $("#centre").focus();
        $("#centre_modal_error").html('Enter Centre')   
      }


        else if ((test_req_id1 =='')&&(test_req_id2 == '')){
            $("#testrequested").css("border", "1px solid #f37777");
            
            $("#select_sample_path").focus();
            $("#select_sample_gens").focus()
            $("#testrequested_error").html("Select Test Requested");
        } 
    
       
    else if ((email =='') && (otherway ==''))
    {
        if ((!emailfilter.test(email)) && (email != '')) 
        {

            $("#email").css("border", "1px solid #f37777");
            $("#email").focus();
            $("#email_modal_error").html("Enter Valid Email  ");
        }
        else
        {
            $("#email").css("border", "1px solid #f37777");
            $("#email").focus();
            $("#email_modal_error").html("Enter Email");
        }
    }

    else if ((!emailfilter.test(email)) && (email != '')){
        $("#email").css("border", "1px solid #f37777");
        $("#email").focus();
        $("#email_error").html("Enter Valid Email  ");
    } 

      else if (contact_pereson == ''){
        $("#contact_person_name").css('border','1px solid #f37777');
        $("#contact_person_name").focus();
        $("#contact_person_name_error").html('Enter Contact Person Name') 
    }


      /* else if (testrequested == ''){
        $("#testrequested").css('border','1px solid #f37777');
        $("#testrequested").focus();
        $("#testrequested_modal_error").html('Enter Description')   
      } */

    /*else if (backgrounddata == ''){
        $("#backgrounddata").css('border','1px solid #f37777');
        $("#backgrounddata").focus();
        $("#backgrounddata_modal_error").html('Enter Background Data')   
    }*/


        
        else if ($("#checkbox4").prop('checked') == true && test == ''){

            $("#id_text_box_show").css("border", "1px solid #f37777");
            $("#id_text_box_show").focus();
            $("#id_text_box_show_error").html("Enter Test");
        }


      else {
      $.ajax({
          method:"POST",
          url : "{% url 'posted_test_edit_by_user' %}",
          contentType:"application/json",
          data:JSON.stringify({
            "test_id":test_id,
            "firstname":firstname,
            "lastname":lastname,
            "patientage":patientage,
            "patientrace":patientrace,
            "selectgender":selectgender,
            "patientweight":patientweight,
            "patientheight":patientheight,
            "drname":drname,
            "datepicker":datepicker,
            "centre":centre,
            "email":email,
            "otherway":otherway,
            "test_requested_type":test_requested_type,
            "contact_pereson":contact_pereson,
            "backgrounddata":backgrounddata,
            //"patienttest":test,
            "weight_unit":weight_unit,
            "height_unit":height_unit

          }),
         success:function(response){
            if(response['status']=='1'){
                console.log(response)
                swal({
                    icon:"success",
                    text:"Test Updated Successfully",
                    closeOnClickOutside:false
                }).then(function(){
                    location.reload()
                })
             }
            else if(response['status']=='0') {
                console.log(response)
                swal({
                    icon:"error",
                    text:"Something Went Wrong",
                    closeOnClickOutside:false
                })
            }
         }
         

      })
    }

    }
</script>



<script>

        
    

    $("#active_div_button").click(function(){
        var tab_type =  "Active_tab"
        $.ajax({
            method:"POST",
            url:"{% url 'test_added_by_user_list' %}",
            contentType:"application/json",
            data:JSON.stringify({
                "tab_type":tab_type
            }),
            success:function(response){
                $("#div_show_test").html(response)
                console.log(response)
            }
        }) 
    })

    function hideShowBriefPathDetails(div_id, button_id)
    {
        if ($('#'+div_id).is(':visible') == true)
        {
            $('#'+div_id).hide(300);
            $('#'+button_id).html(`<i class="fa-solid fa-plus"></i>`);
        }
        else
        {
            $('#'+div_id).show(300);
            $('#'+button_id).html(`<i class="fa-solid fa-minus"></i>`);
        }
    }



    $("#cancelled_div_button").click(function(){
        
        var tab_type = "Cancelled_tab"
        $.ajax({
            method:"POST",
            url:"{% url 'test_added_by_user_list' %}",
            contentType:"application/json",
            data:JSON.stringify({
                "tab_type":tab_type
            }),
            success:function(response){
                $("#div_show_test").html(response)
                
            }
        }) 
    }) 

    $("#confirm_div_button").click(function(){  

        var tab_type = "Confirm_tab"
        $.ajax({
            method:"POST",
            url:"{% url 'test_added_by_user_list' %}",
            contentType:"application/json",
            data:JSON.stringify({
                "tab_type":tab_type
            }),
            success:function(response){
                $("#div_show_test").html(response)
            }
        }) 

    })

    $("#completed_div_button").click(function(){  

    var tab_type = "Complete_tab"
    $.ajax({
        method:"POST",
        url:"{% url 'test_added_by_user_list' %}",
        contentType:"application/json",
        data:JSON.stringify({
            "tab_type":tab_type
        }),
        success:function(response){
            $("#div_show_test").html(response)
        }
    }) 

    })

   

    $("#pending_div_button").click(function(){

        var tab_type = "Pending_tab"
        $.ajax({
            method:"POST",
            url:"{% url 'test_added_by_user_list' %}",
            contentType:"application/json",
            data:JSON.stringify({
                "tab_type":tab_type
            }),
            success:function(response){
                $("#div_show_test").html(response)
                console.log(response)
            }
        }) 
    })


function  get_test_id_to_see_all_bids(id){
    console.log(id)
    
    console.log(id)    
    $.ajax({
        method:"POST",
        url : "{% url 'view_all_bids_on_my_test' %}",
        contentType:"application/json",
        data: JSON.stringify({
            "test_id":id
        }),
        success:function(response){
           $("#postedlist").hide();   
           $("#rts_div").show() 
           $("#rts_div").html(response);
           
        }

    })
}

   function get_id_accordion(id){
      
        $.ajax({
            method:"POST",
            url:"{% url 'get_all_test_of_lot_from_active_tab' %}",
            contentType:"application/JSON",
            data:JSON.stringify({
                "lot_id":id
            }),
            success:function(response){
             
                $("#accordion_data").html(response)
                
           
            }

        })
    }

 

function reload_page_on_back(){
    location.reload()
    }
</script>



<script>


  

  function show_pathalogy_field(){
    
    $("#select_gens_id").hide()
    $("#select_pathlogy_id").show()
    $("#show_hide_data").hide()
    $("#select_sample_gens").val("")
  
  }


  function show_gens_field(){

    $("#select_gens_id").show()
    $("#select_pathlogy_id").hide()
    $("#show_hide_data").hide()
    $("#select_sample_path").val("")
  }


  function show_data_selected_data(value){
    console.log(value)
    $("#show_hide_data").show()
    $.ajax({
      method:"POST",
      url:"show_sample_test_data",
      contentType:"application/json",
      data:JSON.stringify({
        "test_req_id":value
      }),
      success:function(response){
        
        if(response['status'] == '1'){
          console.log(response)
          $("#sample_type_id").text(response['obj_data'][0]['sample_type'])
          $("#transport_id").text(response['obj_data'][0]['transport'])

        //  $("#pathalogy_id").text(response['obj_data'][0]['pathalogy'])


          var path_id = $("#select_sample_path").val()
          var gens_id = $("#select_sample_gens").val()

          if (path_id != ''){
            $("#gens_id").text(response['obj_data'][0]['gens'])
            $("#gens_id").show()
            $("#path").hide()
           // $("#select_sample_gens").val("")
            $("#pathalogy_id").hide()
             $("#gens").show()
          }
          

          if (gens_id != ''){
            $("#pathalogy_id").text(response['obj_data'][0]['pathalogy'])
            $("#pathalogy_id").show()
            $("#gens").hide()
            //$("#select_sample_path").val("")
            $("#gens_id").hide()
            $("#path").show()
          }

        }
        else if(response['status'] == '0'){
          console.log('status 0')
        }
      }
    }) 
  } 


  
    $("#select_sample_path").select2();
    $("#select_sample_gens").select2();  
    $(".select2-selection").css("padding","10px 0px 35px 20px")

  
 
</script>
   
{% endblock %}




